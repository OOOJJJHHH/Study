ec2 ë„ì»¤í™˜ê²½ êµ¬ì„± ë° git pull, ec2 ë””ë ‰í† ë¦¬ì— ì €ì¥í•˜ê¸° ìœ„í•œ Docker ì»¨í…Œì´ë„ˆì™€ ec2 ê³µê°„ ì—°ê²°

1ï¸âƒ£ Docker ì„¤ì¹˜ (Amazon Linux 2)
bash
ì½”ë“œ ë³µì‚¬
sudo yum update -y
sudo amazon-linux-extras install docker -y
sudo service docker start
sudo usermod -a -G docker ec2-user
âš ï¸ EC2 ì¬ì ‘ì† í•„ìˆ˜: usermod í›„ì—ëŠ” í˜„ì¬ í„°ë¯¸ë„ì„ ì¬ì‹œì‘í•˜ê±°ë‚˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì„¸ìš”.


2ï¸âƒ£ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„± (EC2 ë‚´)
ì˜ˆì‹œ ë””ë ‰í† ë¦¬: /home/ec2-user/my-project

bash
ì½”ë“œ ë³µì‚¬
mkdir -p /home/ec2-user/my-project


3ï¸âƒ£ Dockerfile ì‘ì„± (ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ Git pull)
EC2 ë‚´ì— Dockerfileì„ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´ /home/ec2-user/my-project/Dockerfile:

Dockerfile
ì½”ë“œ ë³µì‚¬
FROM amazonlinux:2

# git ë° gradle ì„¤ì¹˜
RUN yum update -y && \
    yum install -y git java-1.8.0-openjdk-devel && \
    curl -s "https://get.sdkman.io" | bash && \
    bash -c "source /root/.sdkman/bin/sdkman-init.sh && sdk install gradle"

# ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œ git pull ìˆ˜í–‰
CMD ["bash", "-c", "git clone https://github.com/your-username/your-repo.git /app"]
ğŸ” ì´ë¯¸ í´ë¡ ëœ ê²½ìš° git pullë§Œ í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ë„ ìˆì–´ìš”. (ì›í•˜ë©´ ì˜ˆì‹œ ì¶”ê°€í•´ë“œë¦´ê²Œìš”.)


4ï¸âƒ£ Dockerì™€ EC2 ë””ë ‰í† ë¦¬ ì—°ê²° (ë³¼ë¥¨ ë§ˆìš´íŠ¸)
Docker ì‹¤í–‰ ì‹œ, EC2ì˜ ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì˜ ë””ë ‰í† ë¦¬ë¡œ ë§ˆìš´íŠ¸í•©ë‹ˆë‹¤.

bash
ì½”ë“œ ë³µì‚¬
docker build -t git-clone-container /home/ec2-user/my-project

docker run --rm -v /home/ec2-user/my-project:/app git-clone-container
-v /home/ec2-user/my-project:/app: EC2ì˜ ë””ë ‰í† ë¦¬(/home/ec2-user/my-project)ë¥¼ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ /appì— ì—°ê²°

ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ Git cloneì„ /appì— ìˆ˜í–‰ â†’ EC2ì— ì €ì¥ë¨


âœ… ìš”ì•½
í•­ëª©	ì„¤ëª…
EC2 ë””ë ‰í† ë¦¬	/home/ec2-user/my-project
Docker ì—­í• 	ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ git clone ìˆ˜í–‰
ì—°ê²° ë°©ì‹	-v ì˜µì…˜ìœ¼ë¡œ EC2 ë””ë ‰í† ë¦¬ì™€ ì»¨í…Œì´ë„ˆ ë””ë ‰í† ë¦¬ ì—°ê²°
ê²°ê³¼	Git clone ê²°ê³¼ë¬¼ì´ EC2ì— ê·¸ëŒ€ë¡œ ì €ì¥


